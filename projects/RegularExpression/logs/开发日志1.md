# 1. 将规则表达式字面量转换成NFA

## 1.1 支持连接运算的转换

### 1.1.1 实现存储状态和状态转移路径的结构

使用一种16字节的节点结构，状态节点。

前8个字节存储：

- 转移到该状态所需要匹配的字符。
- 此节点结构的类型。

后8个字节存储此节点默认转移到的下一个节点的索引。

### 1.1.2 定义默认字符节点类型

此节点类型表示转移到该状态所需要匹配的字符是一个默认字符，即按原义进行匹配。

### 1.1.3 定义空转移节点类型

此节点类型表示转移到该状态不需要匹配任何字符。

### 1.1.4 定义任意字符节点类型

此节点类型表示转移到该状态所需要匹配的字符可以是字母表中的任意一个字符。

### 1.1.5 定义NFA结构

NFA结构线性存储数个状态节点结构，可以视为状态节点的数组。

在只支持连接运算的前提下，状态图只需要存储默认字符节点类型或任意字符节点类型，每个节点默认转移到的下一个节点即此节点在状态图中后继的节点。

### 1.1.6 实现字符串的读取

#### 1.1.6.1 遍历输入的字符串

#### 1.1.6.2 对读取的字符进行处理

- 如果是普通字符，直接生成对应的普通字符节点
- 如果是转义字符，则进行转义后生成对应的普通字符节点

### 1.1.7 将最后一个状态节点的默认转移节点设为结束节点

设定结束节点的索引为 sizevalue_max，不实际存储。

## 1.2 支持或运算的转换

## 1.3 支持闭包运算的转换

## 1.4 支持反运算的转换